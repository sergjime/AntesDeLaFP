<html>
     <!-- Cabecera del documento HTML -->
     <head>
          <meta http-equiv="Content-type" content="text/html;charset=ISO-8859-1">
		  <link rel="stylesheet" type="text/css" href="estilos.css">
          <!-- Titulo del documento -->
          <title>Practica 27</title>		  
<script type="text/javascript">
function validar_obligatorio(campo,alerta)
{
  if (campo.value==null||campo.value=="")
    {
    alert(alerta);return false;
    }
  else{return true;}
}

function validar_email(campo,alerta)
{
  arroba=campo.value.indexOf("@");
  punto=campo.value.lastIndexOf(".");
  if (arroba<1||punto-arroba<2)
    {alert(alerta);return false;}
  else {return true;}
}

function validar_fecha(campo,alerta){  
     var fecha = campo.value;

     var ano = fecha.substring(fecha.lastIndexOf("/")+1,fecha.length);
     var mes = fecha.substring(fecha.indexOf("/")+1,fecha.lastIndexOf("/"));   
     var dia = fecha.substring(0,fecha.indexOf("/"));

    if (isNaN(ano) || ano.length!=4 || parseFloat(ano)<1900){alert(alerta);return false;} 
	if (isNaN(mes) || parseFloat(mes)<1 || parseFloat(mes)>12){alert(alerta);return false;} 
	if (isNaN(dia) || parseInt(dia, 10)<1 || parseInt(dia, 10)>31){alert(alerta);return false;} 
	if (mes==4 || mes==6 || mes==9 || mes==11 || mes==2) {  
		if (mes==2 && dia > 28 || dia>30) {alert(alerta);return false;}
	}
}

function validar_numerico(campo, alerta)
{
   if (isNaN(campo.value)) {
    alert(alerta);
	return false;
   } else {
	return true;
   }
}

function validar_formulario(formulario)
{
  // Comprobamos los campos obligatorios
  if (validar_obligatorio(formulario.nombre,"Debe indicar su nombre.")==false) {formulario.nombre.focus();return false;}
  if (validar_obligatorio(formulario.email,"Debe indicar su email.")==false) {formulario.email.focus();return false;}
  if (validar_obligatorio(formulario.fecha,"Debe indicar su fecha de nacimiento.")==false) {formulario.fecha.focus();return false;}
  if (validar_obligatorio(formulario.telefono,"Debe indicar un teléfono.")==false) {formulario.telefono.focus();return false;} 
  
  // Comprobamos los campos de email
  if (validar_email(formulario.email,"El email no es correcto.")==false) {formulario.email.focus();return false;}

  // Comprobamos los campos de fecha
  if (validar_fecha(formulario.fecha,"Fecha no válida.")==false) {formulario.fecha.focus();return false;}

  // Comprobamos los campos numericos
  if (validar_numerico(formulario.telefono,"Teléfono no válido.")==false) {formulario.telefono.focus();return false;} 
}

</script>

</head>

    <!-- Cuerpo del documento HTML -->
     <body>
	 
	 <div id="contenedor">
		
		<div id="titulo">
			<h1>JAVASCRIPT</h1>
		</div>
		
		<div id="central">
			<form action="respuesta.html" method="post" onsubmit="return validar_formulario(this)">
			<fieldset>
			<legend>Datos</legend>
				Nombre: <input type="text" name="nombre" size="50"><br>
				Apellidos: <input type="text" name="apellidos" size="50"><br>
				Email: <input type="text" name="email" size="30"><br>
				Teléfono: <input type="text" name="telefono" size="10"><br>
				Fecha de nacimiento: <input type="text" name="fecha" size="10"> <span>Formato: dd/mm/aaaa</span>
			</fieldset>
			<input type="submit" value="Submit">
			</form>
		</div>
		
	</div>
	

    </body>

</html>
